<!DOCTYPE html>
<html>
<head>
<title>Slapjack</title>
<canvas id='drawcard' width="600" height="400"></canvas>
<script src="/socket.io/socket.io.js"> var client=io(); </script>
    <style>
        body {background-color:lightblue}
        h1   {color:forestgreen}
        p    {color:green}
    </style>
</head>
<body>
<h1 style="font-family:trebuchet MS">Register</h1>
Your name: <input id="name">
<button id = 'register' onclick='register()'> Register</button>
<script>
    var client=io();
    var ctx = document.getElementById('drawcard').getContext('2d');
    var hiddenCard = new Image();
    hiddenCard.src = '/images/b1fv.png';
    function register(){
        var name = document.getElementById('name').value;
        client.emit('register', {player:name});
    }
    client.on('announce', function(data){
        //console.log(data);
        document.getElementById('status').innerHTML+= '<br>' + data;

    });
    client.on('deal',function (data){
        console.log(data);
        for(var i=0; i < data.players.length; i +=2){
            for(var j=0; j < data.players[i+1]; j +=1){
                ctx.drawImage(hiddenCard, 10 + 10 * j, 10 + i*100)

            }
        }
    /*for(var k = 0; k < data.pile.length){
        var img = new Image
    }*/

    });
</script>
<div id='status'> </div>
</body>
</html>
